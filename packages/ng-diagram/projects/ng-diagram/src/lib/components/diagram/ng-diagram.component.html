<div class="diagram-background-container">
  <ng-content select="ng-diagram-background"></ng-content>
</div>
<ng-diagram-canvas [viewport]="viewport()">
  @for (edge of edges(); track trackEdge($index, edge)) {
    <ng-diagram-edge [attr.data-edge-id]="edge.id">
      @if (getEdgeTemplate(edge.type)) {
        <ng-container *ngComponentOutlet="getEdgeTemplate(edge.type); inputs: { edge }" />
      } @else {
        <ng-diagram-default-edge [edge]="edge" />
      }
    </ng-diagram-edge>
  }
  <ng-diagram-marker-arrow />
  @for (node of nodes(); track trackNode($index, node)) {
    <ng-diagram-node class="ng-diagram-node" [attr.data-node-id]="node.id" [node]="node">
      @if (getNodeTemplate(node.type)) {
        <ng-container *ngComponentOutlet="getNodeTemplate(node.type); inputs: { node }" />
      } @else if (isGroup(node)) {
        <ng-diagram-default-group-template [node]="castToGroupNode(node)" />
      } @else {
        <ng-diagram-default-node-template [node]="node" />
      }
    </ng-diagram-node>
  }
</ng-diagram-canvas>

@if (!config()?.hideWatermark) {
  <ng-diagram-watermark />
}
<ng-diagram-box-selection />
