<div class="minimap-container" [style.width.px]="width()" [style.height.px]="height()">
  <svg
    ngDiagramMinimapNavigation
    [transform]="transform()"
    [viewport]="viewport()"
    class="minimap-svg"
    [attr.viewBox]="'0 0 ' + width() + ' ' + height()"
    [attr.width]="width()"
    [attr.height]="height()"
  >
    <rect class="minimap-background" x="0" y="0" [attr.width]="width()" [attr.height]="height()" />
    @if (isDiagramInitialized()) {
      @for (node of minimapNodes(); track node.id) {
        <rect
          class="minimap-node"
          [attr.x]="node.x"
          [attr.y]="node.y"
          [attr.width]="node.width"
          [attr.height]="node.height"
          [attr.transform]="
            'rotate(' + node.angle + ' ' + (node.x + node.width / 2) + ' ' + (node.y + node.height / 2) + ')'
          "
        />
      }
      @if (hasValidViewport()) {
        <rect
          class="minimap-viewport"
          [attr.x]="viewportRect().x"
          [attr.y]="viewportRect().y"
          [attr.width]="viewportRect().width"
          [attr.height]="viewportRect().height"
        />
      }
    }
  </svg>
</div>
