---
title: Custom Model Example
description: Example of how to create a custom model implementation in ngDiagram
sidebar:
  order: 3
  label: Custom Model
---

import CodeViewer from '@components/code-viewer/code-viewer.astro';
import CustomModel from '../../../components/angular/examples/custom-model/custom-model.astro';

This example demonstrates how to create a custom [`model`](/docs/api/types/model/model/) implementation that persists data directly to localStorage, providing automatic persistence without keeping local copies in memory.

<br />

<CustomModel />
<CodeViewer dirName="examples/custom-model" />

## Additional Explanation

### Custom Model Overview

The [`NgDiagramComponent`](/docs/api/components/ngdiagramcomponent) accepts any object, via the [`model`](/docs/api/components/ngdiagramcomponent/#model) input property (e.g. `[model]="customModelAdapter"`), that implements the [`ModelAdapter`](/docs/api/types/model/modeladapter/) interface.
This means you can create your own custom model implementations beyond the default `SignalModelAdapter` provided by [`initializeModel`](/docs/api/utilities/initializemodel/).
Use [`initializeModelAdapter`](/docs/api/utilities/initializemodeladapter/) to wire up a custom adapter â€” it strips stale runtime properties and assigns fresh internal IDs.
This allows for advanced use cases like connecting to external data sources, implementing custom persistence layers, or integrating with existing state management solutions.

#### Key Features

- **Direct localStorage Persistence**: All data is read from and written directly to localStorage
- **Single Source of Truth**: No local copies of data are maintained in memory
- **Automatic Synchronization**: Changes are immediately persisted
- **Error Handling**: Robust error handling for storage operations

### Implementation Details

#### Understanding the ModelAdapter Interface

The [`ModelAdapter`](/docs/api/types/model/modeladapter/) interface defines the contract that any model implementation must fulfill.
You can find the complete interface documentation in the [API reference](/docs/api/types/model/modeladapter/). The key methods include:

- **Data access**: [`getNodes`](/docs/api/types/model/modeladapter/#getnodes), [`getEdges`](/docs/api/types/model/modeladapter/#getedges), [`getMetadata`](/docs/api/types/model/modeladapter/#getmetadata)
- **Data modification**: [`updateNodes`](/docs/api/types/model/modeladapter/#updatenodes), [`updateEdges`](/docs/api/types/model/modeladapter/#updateedges), [`updateMetadata`](/docs/api/types/model/modeladapter/#updatemetadata)
- **Change notification**: [`onChange`](/docs/api/types/model/modeladapter/#onchange), [`unregisterOnChange`](/docs/api/types/model/modeladapter/#unregisteronchange)
- **Lifecycle management**: [`destroy`](/docs/api/types/model/modeladapter/#destroy), [`undo`](/docs/api/types/model/modeladapter/#undo), [`redo`](/docs/api/types/model/modeladapter/#redo), [`toJSON`](/docs/api/types/model/modeladapter/#tojson)

#### LocalStorageModelAdapter Implementation

This example demonstrates a custom model adapter that persists diagram data to localStorage. The data will survive page refreshes and browser sessions. You can try it by adding nodes and edges, then refreshing the page to see that your changes are retained.
