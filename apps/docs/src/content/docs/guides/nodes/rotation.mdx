---
title: Rotation
description: Understanding how rotation works in ngDiagram
---

import Configuration from '@components/angular/nodes/rotation/rotation.astro';
import CodeSnippet from '@components/code-snippet/code-snippet.astro';

The **rotation** feature in ngDiagram allows users to interactively rotate nodes on the diagram canvas.
Rotatable nodes display a rotation handle that users can drag to change the node's angle.

The rotation is reflected in the node's appearance and can be used to create various diagrams.

<Configuration />

## How It Works

- Nodes can be rotated by dragging the rotation handle.
- The rotation angle is stored in the node's `angle` property.
- Rotation can be enabled per node, per custom template, or globally in the configuration. It can also be configured through the global configuration.

## Custom Node Setup

To make a custom node rotatable, include `<ng-diagram-node-rotate-adornment />` in your node template and import the `NgDiagramNodeRotateAdornmentComponent` reference.

<CodeSnippet relativePath="nodes/rotation/node/node.component.ts" />

## Hierarchy

The rotatable state of a node is determined by the following hierarchy (from highest to lowest priority):

1. The `rotatable` property on the node data.

```typescript
import { Node } from 'ng-diagram';

const node: Node = {
  rotatable: true,
  // other node properties
};
```

2. The `defaultRotatable` property on the `NgDiagramNodeRotateAdornmentComponent` (for custom nodes).

```html
<ng-diagram-node-rotate-adornment [defaultRotatable]="true"></ng-diagram-node-rotate-adornment>
```

3. The global `defaultRotatable` setting in `NgDiagramConfig`.

```typescript
import { NgDiagramConfig } from 'ng-diagram';

const config: NgDiagramConfig = {
  nodeRotation: {
    defaultRotatable: false,
  },
};
```

## Customization

### Rotate Handle

Here are the CSS variables you can use to style the rotation handle:

```
  --ngd-rotate-handle-background-color           // Background color of the handle
  --ngd-rotate-handle-background-color-hover     // Background color on hover or focus
  --ngd-rotate-handle-background-color-active    // Background color when active or rotating
  --ngd-rotate-handle-size                      // Size (width and height) of the handle
  --ngd-rotate-handle-top                       // Positioning of the handle
  --ngd-rotate-handle-right                     // Positioning of the handle
  --ngd-rotate-handle-bottom                    // Positioning of the handle
  --ngd-rotate-handle-left                      // Positioning of the handle
```

You can override these variables in your styles to customize the appearance and position of the rotation handle.

### Custom Handle

If you want to use a custom icon as a handle, simply place your SVG or Angular component inside `<ng-diagram-node-rotate-adornment>`.
The content you provide will be rendered inside the handle.

```typescript
<ng-diagram-node-rotate-adornment>
  <!-- Your custom SVG icon or component here -->
  <svg width="24" height="24" ...>...</svg>
</ng-diagram-node-rotate-adornment>
```

If you do not provide any content inside `<ng-diagram-node-rotate-adornment>`, the component will automatically display its built-in default rotation icon.

## Configuration

Rotation is enabled by default. You can control the default rotation behavior for all nodes by setting the `defaultRotatable` property in the `NgDiagramConfig`:

You can further customize rotation behavior using the `nodeRotation` configuration in `NgDiagramConfig`.
This configuration allows you to control snapping and snap angles for node rotation:

- **computeSnapAngleForNode** - Computes the snap angle for a node's rotation.
- **defaultSnapAngle** - The default snap angle in degrees, used if `computeSnapAngleForNode` returns null.
- **shouldSnapForNode** - Determines whether rotation snapping should be enabled for a node.

You can set these options in your diagram by passing the configuration to the `ng-diagram` component:

<CodeSnippet relativePath="nodes/rotation/diagram.component.ts" sectionId="config" />

## Further Reading

[Nodes →](/docs/guides/nodes/nodes) | [Custom Nodes →](/docs/guides/nodes/custom-nodes)
