---
title: Rotation
description: Understanding how rotation works in ngDiagram
---

import { Aside } from '@astrojs/starlight/components';
import Configuration from '@components/angular/nodes/rotation/rotation.astro';
import CodeSnippet from '@components/code-snippet/code-snippet.astro';

The **rotation** feature in ngDiagram allows users to interactively rotate nodes on the diagram canvas.
Rotatable nodes display a rotation handle that users can drag to change the node's angle.

The rotation is reflected in the node's appearance and can be used to create various diagrams.

<br />

<Configuration />

## How It Works

- Nodes can be rotated by dragging the rotation handle.
- The rotation angle is stored in the node's [`angle`](/docs/api/types/model/simplenode/#angle) property.
- Rotation can be enabled per node, per custom template, or globally in the configuration. It can also be configured through the global configuration.

## Custom Node Setup

To make a custom node rotatable, include [`<ng-diagram-node-rotate-adornment />`](/docs/api/components/ngdiagramnoderotateadornmentcomponent) in your node template and import the [`NgDiagramNodeRotateAdornmentComponent`](/docs/api/components/ngdiagramnoderotateadornmentcomponent) reference.

<CodeSnippet relativePath="nodes/rotation/node/node.component.ts" />

## Customization

### Rotate Handle

Here are the CSS variables you can use to style the rotation handle:

```
  --ngd-rotate-handle-background-color           // Background color of the handle
  --ngd-rotate-handle-background-color-hover     // Background color on hover or focus
  --ngd-rotate-handle-background-color-active    // Background color when active or rotating
  --ngd-rotate-handle-size                      // Size (width and height) of the handle
  --ngd-rotate-handle-top                       // Positioning of the handle
  --ngd-rotate-handle-right                     // Positioning of the handle
  --ngd-rotate-handle-bottom                    // Positioning of the handle
  --ngd-rotate-handle-left                      // Positioning of the handle
```

You can override these variables in your styles to customize the appearance and position of the rotation handle.

### Custom Handle

If you want to use a custom icon as a handle, simply place your SVG or Angular component inside [`<ng-diagram-node-rotate-adornment>`](/docs/api/components/ngdiagramnoderotateadornmentcomponent).
The content you provide will be rendered inside the handle.

```typescript
<ng-diagram-node-rotate-adornment>
  <!-- Your custom SVG icon or component here -->
  <svg width="24" height="24" ...>...</svg>
</ng-diagram-node-rotate-adornment>
```

If you do not provide any content inside [`<ng-diagram-node-rotate-adornment>`](/docs/api/components/ngdiagramnoderotateadornmentcomponent), the component will automatically display its built-in default rotation icon.

## Configuration

### Rotation Settings

You can further customize rotation behavior using the [`nodeRotation`](/docs/api/types/configuration/flowconfig/#noderotation) configuration in [`NgDiagramConfig`](/docs/api/types/configuration/flowconfig):

- **[`defaultRotatable`](/docs/api/types/configuration/features/noderotationconfig/#defaultrotatable)** – Controls whether rotation is enabled by default for all nodes. Default is `true`.
- **[`computeSnapAngleForNode`](/docs/api/types/configuration/features/noderotationconfig/#computesnapanglefornode)** - Computes the snap angle for a node's rotation.
- **[`defaultSnapAngle`](/docs/api/types/configuration/features/noderotationconfig/#defaultsnapangle)** - The default snap angle in degrees, used if `computeSnapAngleForNode` returns null.
- **[`shouldSnapForNode`](/docs/api/types/configuration/features/noderotationconfig/#shouldsnapfornode)** - Determines whether rotation snapping should be enabled for a node.

You can set these options in your diagram by passing the configuration to the [`ng-diagram`](/docs/api/components/ngdiagramcomponent) component:

<CodeSnippet relativePath="nodes/rotation/diagram.component.ts" sectionId="config" />

### Rotation Setting Priority

The [`rotatable`](/docs/api/types/model/simplenode/#rotatable) property controls whether a node can be rotated.
This property can be defined at several levels, and when multiple levels specify it, the one with the highest priority takes effect.

The following list shows the order of priority — from highest to lowest:

1. **Node-level setting** – Directly set the [`rotatable`](/docs/api/types/model/simplenode/#rotatable) property on the node data object.

```typescript
import { Node } from 'ng-diagram';

const node: Node = {
  id: 'my-id',
  rotatable: true,
  // other node properties
};
```

This setting applies specifically to that node and overrides all other defaults.

2. **Template-level setting** – Use the [`defaultRotatable`](/docs/api/components/ngdiagramnoderotateadornmentcomponent/#defaultrotatable) input on the [`NgDiagramNodeRotateAdornmentComponent`](/docs/api/components/ngdiagramnoderotateadornmentcomponent) within your custom node template.

```html
<ng-diagram-node-rotate-adornment [defaultRotatable]="true"></ng-diagram-node-rotate-adornment>
```

This defines the default rotation behavior for all nodes that use that template.

3. **Global configuration** – Define the global [`defaultRotatable`](/docs/api/types/configuration/features/noderotationconfig/#defaultrotatable) setting inside your [`NgDiagramConfig`](/docs/api/types/configuration/flowconfig).

```typescript
import { NgDiagramConfig } from 'ng-diagram';

const config: NgDiagramConfig = {
  nodeRotation: {
    defaultRotatable: false,
  },
};
```

This establishes the fallback behavior for all nodes unless overridden by a template or individual node.

<Aside type="tip">
  If your rotation configuration seems to be ignored, check for overrides at higher priority levels — node-level
  settings always take precedence over template or global configurations.
</Aside>

[Read more about global configuration in ngDiagram →](/docs/guides/configuration/)

## Events

The diagram emits several events related to rotation that you can subscribe to via `@Output` bindings on the [`ng-diagram`](/docs/api/components/ngdiagramcomponent) component or programmatically through [`NgDiagramService.addEventListener()`](/docs/api/services/ngdiagramservice#addeventlistener):

- [`nodeRotateStarted`](/docs/api/types/events/noderotatestartedevent) - Fired once when the user starts rotating a node by dragging the rotation handle.
- [`selectionRotated`](/docs/api/types/events/selectionrotatedevent) - Fired continuously on each angle change while the user is rotating nodes.
- [`nodeRotateEnded`](/docs/api/types/events/noderotateendedevent) - Fired when the user releases the pointer after rotating a node. The node will have its final angle when this event is received.

## Further Reading

[Nodes →](/docs/guides/nodes/nodes) | [Custom Nodes →](/docs/guides/nodes/custom-nodes)
