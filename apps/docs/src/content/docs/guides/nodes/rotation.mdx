---
title: Rotation
description: Understanding how rotation works in ngDiagram
---

import Configuration from '@components/angular/nodes/rotation/configuration/configuration.astro';
import Hierarchy from '@components/angular/nodes/rotation/hierarchy/hierarchy.astro';
import CodeSnippet from '@components/code-snippet/code-snippet.astro';

The **rotation** feature in ngDiagram allows users to interactively rotate nodes on the diagram canvas.
Rotatable nodes display a rotation handle that users can drag to change the node's angle.

The rotation is reflected in the node's appearance and can be used to create various diagrams.

## How It Works

- Nodes can be rotated by dragging the rotation handle.
- The rotation angle is stored in the node's `angle` property.
- Rotation can be enabled per node, configured globally via diagram config or in the rotate adornment component of a custom node template.

## Global Configuration

Rotation is enabled by default. You can control the default rotation behavior for all nodes by setting the `defaultRotatable` property in the `NgDiagramConfig`:

```typescript
import { NgDiagramConfig } from 'ng-diagram';

const config: NgDiagramConfig = {
  nodeRotation: {
    defaultRotatable: false,
  },
};
```

## Default Nodes

Default nodes use the value from the global configuration to determine if they are rotatable. You can override the global configuration for specific nodes by setting the `rotatable` property on the node data.

```typescript
{
  id: 'node1',
  type: 'default',
  position: { x: 100, y: 100 },
  data: {
    rotatable: false,
  },
}
```

## Custom Node Setup

To make a custom node rotatable, include `<ng-diagram-node-rotate-adornment />` in your node template and import the `NgDiagramNodeRotateAdornmentComponent` reference.

<CodeSnippet relativePath="nodes/rotation/configuration/node/node.component.ts" />

In custom nodes, together with the global and data properties, the rotatable state can also be controlled via the `defaultRotatable` property on the `NgDiagramNodeRotateAdornmentComponent`.

```html
<ng-diagram-node-rotate-adornment [defaultRotatable]="true"></ng-diagram-node-rotate-adornment>
```

## Hierarchy

The rotatable state of a node is determined by the following hierarchy (from highest to lowest priority):

1. The `rotatable` property on the node data.
2. The `defaultRotatable` property on the `NgDiagramNodeRotateAdornmentComponent` (for custom nodes).
3. The global `defaultRotatable` setting in `NgDiagramConfig`.

In the example below you can see how different nodes have different rotatable states based on this hierarchy. Select a node to view its configuration.

<Hierarchy />

The above example uses this model:

<CodeSnippet relativePath="nodes/rotation/hierarchy/diagram.component.ts" sectionId="model" />

Setting the `NgDiagramNodeRotateAdornmentComponent` `defaultRotatable` is done by using the `adornmentRotatable` property in the nodes custom data:

<CodeSnippet relativePath="nodes/rotation/hierarchy/node/node.component.ts" />

## Customization

### Rotate Handle

Here are the CSS variables you can use to style the rotation handle:

```
  --ngd-rotate-handle-background-color           // Background color of the handle
  --ngd-rotate-handle-background-color-hover     // Background color on hover or focus
  --ngd-rotate-handle-background-color-active    // Background color when active or rotating
  --ngd-rotate-handle-size                      // Size (width and height) of the handle
  --ngd-rotate-handle-top                       // Positioning of the handle
  --ngd-rotate-handle-right                     // Positioning of the handle
  --ngd-rotate-handle-bottom                    // Positioning of the handle
  --ngd-rotate-handle-left                      // Positioning of the handle
```

You can override these variables in your styles to customize the appearance and position of the rotation handle.

### Custom Handle

If you want to use a custom icon as a handle, simply place your SVG or Angular component inside `<ng-diagram-node-rotate-adornment>`.
The content you provide will be rendered inside the handle.

```typescript
<ng-diagram-node-rotate-adornment>
  <!-- Your custom SVG icon or component here -->
  <svg width="24" height="24" ...>...</svg>
</ng-diagram-node-rotate-adornment>
```

If you do not provide any content inside `<ng-diagram-node-rotate-adornment>`, the component will automatically display its built-in default rotation icon.

## Configuration

You can further customize rotation behavior using the `nodeRotation` configuration in `NgDiagramConfig`.
This configuration allows you to control snapping and snap angles for node rotation:

- **computeSnapAngleForNode** - Computes the snap angle for a node's rotation.
- **defaultSnapAngle** - The default snap angle in degrees, used if `computeSnapAngleForNode` returns null.
- **shouldSnapForNode** - Determines whether rotation snapping should be enabled for a node.

You can set these options in your diagram by passing the configuration to the `ng-diagram` component:

<CodeSnippet relativePath="nodes/rotation/configuration/diagram.component.ts" sectionId="config" />

## Example

<Configuration />

## Further Reading

[Nodes →](/docs/guides/nodes/nodes) | [Custom Nodes →](/docs/guides/nodes/custom-nodes)
