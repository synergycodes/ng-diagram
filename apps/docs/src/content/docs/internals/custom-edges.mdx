---
title: Custom Edges
description: How to create and implement custom edges in NgDiagram
---

import CodeSnippet from '@components/code-snippet/code-snippet.astro';

Default edges in NgDiagram provide support for several different routing algorithms (straight, orthogonal, bezier), custom arrowheads, stroke and can be styled using CSS.

To have more fine-grained control over edge rendering (like custom routing), create a custom edge by implementing `NgDiagramEdgeTemplate` and using `NgDiagramBaseEdgeComponent`.

## Registration

Custom edge types need to be registered in the `edgeTemplateMap` that is passed to `NgDiagram` component.

<CodeSnippet
  relativePath='custom-edges/diagram.component.ts'
  range={[13, 60]}
  collapse={["8-14", "20-45"]}
  mark={[5, { range: "17-19"}, "[edgeTemplateMap]=\"edgeTemplateMap\""]}
/>

## Custom Routing

import BasicCustomEdge from '@components/angular/custom-edges/basic-custom-edge.astro';

<BasicCustomEdge />

```typescript
@Component({
  selector: 'custom-edge',
  template: `<ng-diagram-base-edge [edge]="edge()" [pathAndPoints]="pathAndPoints()" [stroke]="'blue'" />`,
  imports: [NgDiagramBaseEdgeComponent],
})
export class CustomEdgeComponent implements NgDiagramEdgeTemplate {
  edge = input.required<Edge>();

  pathAndPoints = computed(() => ({
    path: this.generateCustomPath(),
    points: this.getControlPoints(),
  }));

  private generateCustomPath(): string {
    const { sourcePosition, targetPosition } = this.edge();

    // Custom path logic here
    return `M ${sourcePosition.x},${sourcePosition.y} L ${targetPosition.x},${targetPosition.y}`;
  }
}
```

## Styling & Markers

```typescript
@Component({
  template: `
    <ng-diagram-base-edge
      [edge]="edge()"
      [pathAndPoints]="pathAndPoints()"
      [stroke]="edgeColor()"
      [strokeWidth]="2"
      [customMarkerEnd]="'ng-diagram-arrow'"
    />
  `,
})
export class StyledEdgeComponent {
  edgeColor = computed(() => (this.edge().selected ? '#9140ff' : '#6f7480'));
}
```

## Adding Labels

```typescript
@Component({
  template: `
    <ng-diagram-base-edge [edge]="edge()" [pathAndPoints]="pathAndPoints()">
      <ng-diagram-base-edge-label [id]="'label-1'" [positionOnEdge]="0.5">
        <div class="edge-label">{{ edge().data?.label }}</div>
      </ng-diagram-base-edge-label>
    </ng-diagram-base-edge>
  `,
  imports: [NgDiagramBaseEdgeComponent, BaseEdgeLabelComponent],
})
export class LabeledEdgeComponent implements NgDiagramEdgeTemplate {
  edge = input.required<Edge>();
}
```
