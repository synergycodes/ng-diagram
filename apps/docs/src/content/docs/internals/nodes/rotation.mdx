---
title: Rotation
description: Understanding how rotation works in ngDiagram
---

import CodeSnippet from '@components/code-snippet/code-snippet.astro';
import { LinkCard } from '@astrojs/starlight/components';
import Rotation from '@components/angular/nodes/rotation/rotation.astro';

The **rotation** feature in ngDiagram allows users to interactively rotate nodes on the diagram canvas.
Rotatable nodes display a rotation handle that users can drag to change the node's angle.

The rotation is reflected in the node's appearance and can be used to create various diagrams.

## How Rotation Works

- Nodes can be rotated by dragging the rotation handle.
- The rotation angle is stored in the node's `angle` property.
- Rotation can be enabled per node and configured globally via diagram config.

## Adding Rotation Adornment to a Custom Node

To make a custom node rotatable, include `<ng-diagram-node-rotate-adornment />` in your node template and import the `NgDiagramNodeRotateAdornmentComponent` reference.

<CodeSnippet relativePath="nodes/rotation/node.component.ts" />

## Enabling Rotation for a Node

Enable rotation by setting the `rotatable` property to `true` in your node definition:

<CodeSnippet relativePath="nodes/rotation/rotation-wrapper.component.ts" />

When `rotatable` is set, the rotation handle will appear, and the node can be rotated by the user.

## Customizing the Rotate Handle

### Styling the Rotate Handle

Here are the CSS variables you can use to style the rotation handle:

```
  --ngd-rotate-handle-background-color           // Background color of the handle
  --ngd-rotate-handle-background-color-hover     // Background color on hover or focus
  --ngd-rotate-handle-background-color-active    // Background color when active or rotating
  --ngd-rotate-handle-size                      // Size (width and height) of the handle
  --ngd-rotate-handle-top                       // Positioning of the handle
  --ngd-rotate-handle-right                     // Positioning of the handle
  --ngd-rotate-handle-bottom                    // Positioning of the handle
  --ngd-rotate-handle-left                      // Positioning of the handle
```

You can override these variables in your styles to customize the appearance and position of the rotation handle.

### Custom Handle

If you want to use a custom icon as a handle, simply place your SVG or Angular component inside `<ng-diagram-node-rotate-adornment>`.
The content you provide will be rendered inside the handle.

```typescript
<ng-diagram-node-rotate-adornment>
  <!-- Your custom SVG icon or component here -->
  <svg width="24" height="24" ...>...</svg>
</ng-diagram-node-rotate-adornment>
```

If you do not provide any content inside `<ng-diagram-node-rotate-adornment>`, the component will automatically display its built-in default rotation icon.

## Configuring Rotation via Diagram Config

You can further customize rotation behavior using the `nodeRotation` configuration in `NgDiagramConfig`.
This configuration allows you to control snapping and snap angles for node rotation:

- **computeSnapAngleForNode** - Computes the snap angle for a node's rotation.
- **defaultSnapAngle** - The default snap angle in degrees, used if `computeSnapAngleForNode` returns null.
- **shouldSnapForNode** - Determines whether rotation snapping should be enabled for a node.

You can set these options in your diagram configuration:

<CodeSnippet relativePath="nodes/rotation/rotation-wrapper.component.ts" />

Pass this configuration to the `ng-diagram` component:

<CodeSnippet relativePath="nodes/rotation/rotation-wrapper.component.ts" />

## Example

<Rotation />

## Further Reading

<LinkCard
  icon="list-format"
  title="Nodes"
  href="/docs/internals/nodes/nodes"
  description="Learn more about node features"
/>
<LinkCard
  icon="list-format"
  title="Custom Nodes"
  href="/docs/internals/nodes/custom-nodes"
  description="Create custom node templates"
/>
