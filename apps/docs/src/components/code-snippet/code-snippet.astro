---
import { Code } from "@astrojs/starlight/components";
import HighlightedCode from "../highlighted-code/highlighted-code.astro";
import type { ComponentProps } from 'astro/types';
import { getAngularFileSource } from "./get-angular-file-source";

interface Props extends ComponentProps<typeof Code> {
  /**
  * path to the file relative to the angular directory
  */
  relativePath: string;

  /**
  * id of the section to be used as a source
  */
  sectionId?: string;
}

const { relativePath, sectionId, ...rest } = Astro.props;

const { content, extension } = await getAngularFileSource(relativePath);
---

<HighlightedCode lang={extension} sectionId={sectionId} {...rest} code={content} />
